<!DOCTYPE html>
<html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BILAL IBNU RABAH</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="creach.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,600,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    </head>
<body>
    <section class="header">
        
        <nav>
            <a href="index.html"><img src="images/BILAL LOGO.png"></a>
            <div class="nav-links" id="navLinks">  
                <i class="fa fa-close" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="about.html">ABOUT</a></li>
                    <li><a href="contact.html">CONTACT</a></li>
                </ul>
            </div>
            <i class="fa fa-bars" onclick="showMenu()"></i>
        </nav>
        
        <div class="text-box">
            <h1>BILAL IBNU RABAH INTERNATIONAL ACADEMY</h1>
            <p>No4, 5/7 Road H. Kinkinau GRA,<br>Kaduna.</p>
            <a href="contact.html" class="hero-btn">Visit Us </a>
        </div>
    </section>
    <h2>Student Registration Form</h2>
    <form id="registrationForm" name="submit-to-google-sheet">
        
        <label for="autoRegNumber">Student Number :</label>
        <input type="text" id="autoRegNumber" name="regNumber" readonly><br>
        
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>

        <label for="class">Class:</label>
        <input type="text" id="class" name="class" required><br>

        <label for="address">Home Address:</label>
        <input type="text" id="address" name="address" required><br>

        <label for="dob">Date of Birth:</label>
        <input type="date" id="dob" name="dob" required><br>

        <label for="state">State of Origin:</label>
        <input type="text" id="state" name="state" required><br>

        <label for="nextOfKin">Next of Kin:</label>
        <input type="text" id="nextOfKin" name="nextOfKin" required><br>

        <label for="fatherPhone">Father's Phone Number:</label>
        <input type="tel" id="fatherPhone" name="fatherPhone" required><br>

        <label for="motherPhone">Mother's Phone Number:</label>
        <input type="tel" id="motherPhone" name="motherPhone" required><br>

        <label for="entryDate">Date of Entry:</label>
        <input type="date" id="entryDate" name="entryDate" required><br>

        <label for="exitDate">Date of Leaving:</label>
        <input type="date" id="exitDate" name="exitDate"><br>

        <button type="button" onclick="submitForm()">Submit</button>
    </form>
    <div id="successMessage" style="display: none;">
        <p>Form submitted successfully!</p>
      </div>
    <script>
        

        
        var navLinks = document.getElementById("navLinks");

function showMenu() {
    navLinks.style.right = "0";
}

function hideMenu() {
    navLinks.style.right = "-200px";
}
    </script>
    <script>
      function showSuccessMessage() {
        var successMessage = document.getElementById('successMessage');
        successMessage.style.display = 'block';
      }
        // Add this function to generate the registration number
function generateRegistrationNumber() {
    var prefix = "BIRIA"; // You can customize the prefix
    var year = new Date().getFullYear().toString().substr(-2); // Get the last two digits of the current year
    var randomDigits = Math.floor(100000 + Math.random() * 900000); // Generate 6 random digits

    var registrationNumber = prefix + "/" + randomDigits + "/" + year;

    // Set the generated number to the input field
    document.getElementById('autoRegNumber').value = registrationNumber;
}

// Modify the submitForm function to include the auto-generated registration number
function submitForm() {
    generateRegistrationNumber(); // Call the function to generate the registration number

    var form = document.getElementById('registrationForm');
    var formData = new FormData(form);

    // The rest of your form submission code
    fetch('https://script.google.com/macros/s/AKfycby_pYHi61GsPUq8iMvIXb9iBdi4bHKJUrH8-1Ya7bBoQ8EGNLrJKe3y-VWyXsUwDDxcUQ/exec', {
        method: 'POST',
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.text();
    })
    .then(data => {
    if (data.includes('Duplicate registration number.')) {
      alert('Duplicate registration number. Please generate a new one.');
    } else {
      console.log(data);
      showSuccessMessage();
      form.reset();
      generateRegistrationNumber();
    }
  })
  .catch(error => {
    console.error('Error:', error);
  });
}

  
      </script>
   
</body>
</html>
